function format(d) {
    return '<table width="100%" class="expandedDatatable">' +
        '<thead>' +
        '<tr class="h-100">' +
        '<th class="py-2 da_010 font-weight-500 border-top border-bottom">Type</th>' +
        '<th class="py-2 da_010 font-weight-500 border-top border-bottom">Workflow</th>' +
        '<th class="py-2 da_010 font-weight-500 border-top border-bottom">Eff Date</th>' +
        '<th class="py-2 da_010 font-weight-500 border-top border-bottom">Status</th>' +
        '<th class="py-2 da_010 font-weight-500 border-top border-bottom">UW</th>' +
        '<th class="py-2 da_010 font-weight-500 border-top border-bottom">Broker</th>' +
        '<th class="py-2 da_010 font-weight-500 border-top border-bottom">Balance</th>' +
        '<th class="py-3 da_010 font-weight-500 border-top border-bottom" width="30px"></th>' +
        '</tr>' +
        '</thead>' +
        '<tbody>' +
        '<tr class="h-100">' +
        '<td class="py-2">Individual</td>' +
        '<td class="py-2">Medium</td>' +
        '<td class="py-2">03/05/20</td>' +
        '<td class="py-2">Inprogress</td>' +
        '<td class="py-2">$1000</td>' +
        '<td class="py-2">Acme Hospitals</td>' +
        '<td class="py-2">$2000</td>' +
        '<td class="px-0 py-0 text-center align-middle dropdown da_017 da_025">' +
          '<button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>' +
          '<div class="dropdown-menu py-0" aria-labelledby="dropdownMenuButton">' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#">View Details</a>' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#" data-toggle="modal" data-target="#share-model">Share</a>' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#">Download</a>' +
          '</div>' +
        '</td>' +
        '</tr>' +
        '<tr class="h-100">' +
        '<td class="py-2">Individual</td>' +
        '<td class="py-2">Medium</td>' +
        '<td class="py-2">03/05/20</td>' +
        '<td class="py-2">Inprogress</td>' +
        '<td class="py-2">$1000</td>' +
        '<td class="py-2">Acme Hospitals</td>' +
        '<td class="py-2">$2000</td>' +
        '<td class="px-0 py-0 text-center align-middle dropdown da_017 da_025">' +
          '<button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>' +
          '<div class="dropdown-menu py-0" aria-labelledby="dropdownMenuButton">' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#">View Details</a>' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#" data-toggle="modal" data-target="#share-model">Share</a>' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#">Download</a>' +
          '</div>' +
        '</td>' +
        '</tr>' +
        '<tr class="h-100">' +
        '<td class="py-2">Individual</td>' +
        '<td class="py-2">Medium</td>' +
        '<td class="py-2">03/05/20</td>' +
        '<td class="py-2">Inprogress</td>' +
        '<td class="py-2">$1000</td>' +
        '<td class="py-2">Acme Hospitals</td>' +
        '<td class="py-2">$2000</td>' +
        '<td class="px-0 py-0 text-center align-middle dropdown da_017 da_025">' +
          '<button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>' +
          '<div class="dropdown-menu py-0" aria-labelledby="dropdownMenuButton">' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#">View Details</a>' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#" data-toggle="modal" data-target="#share-model">Share</a>' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#">Download</a>' +
          '</div>' +
        '</td>' +
        '</tr>' +
        '<tr class="h-100">' +
        '<td class="py-2">Individual</td>' +
        '<td class="py-2">Medium</td>' +
        '<td class="py-2">03/05/20</td>' +
        '<td class="py-2">Inprogress</td>' +
        '<td class="py-2">$1000</td>' +
        '<td class="py-2">Acme Hospitals</td>' +
        '<td class="py-2">$2000</td>' +
        '<td class="px-0 py-0 text-center align-middle dropdown da_017 da_025">' +
          '<button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>' +
          '<div class="dropdown-menu py-0" aria-labelledby="dropdownMenuButton">' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#">View Details</a>' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#" data-toggle="modal" data-target="#share-model">Share</a>' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#">Download</a>' +
          '</div>' +
        '</td>' +
        '</tr>' +
        '<tr class="h-100">' +
        '<td class="py-2">Individual</td>' +
        '<td class="py-2">Medium</td>' +
        '<td class="py-2">03/05/20</td>' +
        '<td class="py-2">Inprogress</td>' +
        '<td class="py-2">$1000</td>' +
        '<td class="py-2">Acme Hospitals</td>' +
        '<td class="py-2">$2000</td>' +
        '<td class="px-0 py-0 text-center align-middle dropdown da_017 da_025">' +
          '<button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>' +
          '<div class="dropdown-menu py-0" aria-labelledby="dropdownMenuButton">' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#">View Details</a>' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#" data-toggle="modal" data-target="#share-model">Share</a>' +
            '<a class="dropdown-item font-weight-500 text-gray-500 btn-hover px-4 py-3" href="#">Download</a>' +
          '</div>' +
        '</td>' +
        '</tr>' +
        '</tbody>' +
        '</table>';
}

$(document).ready(function () {
    var table = $('#insured-table').DataTable({

        'columns': [{
                'data': 'id',
                'width': '30px'
            },
            {
                'data': 'Priority'
            },
            {
                'data': 'Insured',
                'width': '800px'
            },
            {
                'data': 'Insur'
            },
            {
                'data': 'Policy-Status',
                'width': '50px'
            }
        ],
        'pagingType': 'simple',
        'responsive': true,
        'scrollX': true,
        'ordering': false,
        'language': {
            paginate: {
                next: '<img src="img/right-black-chevron.svg">',
                previous: '<img src="img/left-black-chevron.svg">'
            }
        },
        "dom": '<"float-left"><"float-right">rt<"row"<"col-sm-5"l><"col-sm-3"l><"col-sm-3"i><"col-sm-1"p>>'
    });

    $("#insured-table_length").addClass('mt-2').html('<span class="text-gray-500">Total Rows: <b>25</b></span>');

    $('#insured-table tbody').on('click', '.details-control', function () {
        var tr = $(this).closest('tr');
        var row = table.row(tr);

        if (row.child.isShown()) {
            row.child.hide();
            tr.removeClass('shown');
            if ($('#insured-table').data('view') == 'collapse_view') {
                tr.find(".expandview").addClass("d-none");
            }


        } else {
            row.child(format(row.data())).show();
            tr.addClass('shown');
            if ($('#insured-table').data('view') == 'collapse_view') {
                tr.find(".expandview").removeClass("d-none");
            }

        }
    });





    $('#insured-compact-view').on('click', function() {
    if($('#insured-table').data('view') == 'collapse_view'){
        $('#insured-table').data('view', 'expand_view');
    $('.insuredexpandview').removeClass("d-none");
    
    $("#insured-compact-view img").attr("src", "img/view-two.svg");
    $('#insured-compact-view').removeClass("da_026").addClass("da_027");
    }
    else{
       $('#insured-table').data('view', 'collapse_view');
        $('.insuredexpandview').addClass("d-none");
        $("#insured-compact-view img").attr("src", "img/view-one-blue.svg");
    $('#insured-compact-view').removeClass("da_026").addClass("da_027");
    }
    

});


    $('#insured-compact-view').mouseover(function() {
    if ($('#insured-table').data('view') == 'collapse_view') {
        $('img', this).attr('src', function(i, oldSrc) {

            return 'img/view-one-blue.svg';
        });
        $("#insured-compact-view").attr('title', 'Slim view');
    }
    else{
        $('img', this).attr('src', function(i, oldSrc) {

            return 'img/view-two.svg';
        });
        $("#insured-compact-view").attr('title', 'Regular view');
    }
});

$('#insured-compact-view').mouseout(function() {
    if ($('#insured-table').data('view') == 'collapse_view') {
        $('img', this).attr('src', function(i, oldSrc) {

            return 'img/view-one.svg';
        });
        $("#insured-compact-view").attr('title', 'Slim view');
    }
    else{
        $('img', this).attr('src', function(i, oldSrc) {

            return 'img/view-two-grey.svg';
        });
        $("#insured-compact-view").attr('title', 'Regular view');
    }
});


    // Handle click on "Collapse All" button
    $('#insured-compact-view').on('click', function(){
        // Enumerate all rows
        table.rows().every(function(){
            // If row has details expanded
            if(this.child.isShown()){
                // Collapse row details
                this.child.hide();
                $(this.node()).removeClass('shown');
            }
        });
    });


    $('#selectAll').change(function () {
        $('.cb-element').prop('checked', this.checked);
    });

    $('.cb-element').change(function () {
        if ($('.cb-element:checked').length == $('.cb-element').length) {
            $('#selectAll').prop('checked', true);
        } else {
            $('#selectAll').prop('checked', false);
        }
    });
});
/****************************************insured page js********************************************/
$('#insured-table-header-two').removeClass("d-flex").css("display", "none");

function switchVisibleAddinsured() {
    if (document.getElementById('addinsuredSectionOne')) {

        if (document.getElementById('addinsuredSectionOne').classList == 'd-none') {
            document.getElementById('addinsuredSectionOne').classList.remove('d-none');
            document.getElementById('addinsuredSectionTwo').classList.add('d-none');
            $('#insured-table-header-one').addClass("d-flex").css("display", "block");
            $('#insured-table-header-three').css("display", "block");
            $('#insured-table-header-two').removeClass("d-flex").css("display", "none");
            $(".insured-table-comp").removeClass("d-none");
            $(".added-new-insured").html($('<i/>', {
                class: 'fas fa-plus fa-sm text-white pr-2'
            })).append('Add insured');

        } else {
            document.getElementById('addinsuredSectionOne').classList.add('d-none');
            document.getElementById('addinsuredSectionTwo').classList.remove('d-none');
            $('#insured-table-header-one').removeClass("d-flex").css("display", "none");
            $('#insured-table-header-two').addClass("d-flex").css("display", "block");
            $('#insured-table-header-three').css("display", "none");
            $(".user-table-comp").addClass("d-none");
            $(".added-new-insured").html($('<i/>', {
                class: 'fas fa-arrow-left fa-sm text-white pr-2'
            })).append('Back');

        }
    }
}


$(document).ready(function() {
    $('#insured-check-div-two').removeClass("d-sm-flex").hide();
    $(".cb-element, #selectAll").on('change', function(e) {
        if ($('.cb-element:checked').length > 0) {
            $('#insured-check-div-one').removeClass("d-sm-flex").css("display", "none");
            $('#insured-check-div-two').addClass("d-sm-flex").css("display", "block");
        } else {
            $('#insured-check-div-one').addClass("d-sm-flex").css("display", "block");
            $('#insured-check-div-two').removeClass("d-sm-flex").css("display", "none");
        }
    });
});