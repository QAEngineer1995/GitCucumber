function format(d) {
    return '<table width="100%" class="expandedDatatable">' +
        '<thead>' +
        '<tr class="h-100">' +
        '<th class="pl-4 py-2 da_010 font-weight-500 border-top border-bottom">Date</th>' +
        '<th class="py-2 da_010 font-weight-500 border-top border-bottom">Batch</th>' +
        '<th class="py-2 da_010 font-weight-500 border-top border-bottom">Reference</th>' +
        '<th class="py-2 da_010 font-weight-500 border-top border-bottom">Amount</th>' +
        '<th class="py-2 da_010 font-weight-500 border-top border-bottom">Source</th>' +
        '<th class="py-2 da_010 font-weight-500 border-top border-bottom text-center" width="30px"></th>' +
        '</tr>' +
        '</thead>' +
        '<tbody>' +
        '<tr class="h-100">' +
        '<td class="pl-4 py-2">03/05/20</td>' +
        '<td class="py-2">1238102382</td>' +
        '<td class="py-2">Reference</td>' +
        '<td class="py-2">$24</td>' +
        '<td class="py-2">Source</td>' +
        '<td class="px-0 py-0 text-center align-middle dropdown da_017 da_025">' +
        '<button type="button" class="mx-3 btn dropdown-toggle" data-toggle="dropdown"></button>' +
        '<div class="w-228 dropdown-menu dropdown-menu-right drp-light-blue-bg p-0" aria-labelledby="dropdownMenuButton">' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3">View Details</button></div>' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3" data-toggle="modal" data-target="#share-model">Share</button></div>' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3">Download</button></div>' +
        '</div>' +
        '</td>' +
        '</tr>' +
        '<tr class="h-100">' +
        '<td class="pl-4 py-2">03/05/20</td>' +
        '<td class="py-2">1238102382</td>' +
        '<td class="py-2">Reference</td>' +
        '<td class="py-2">$24</td>' +
        '<td class="py-2">Source</td>' +
        '<td class="px-0 py-0 text-center align-middle dropdown da_017 da_025">' +
        '<button type="button" class="mx-3 btn dropdown-toggle" data-toggle="dropdown"></button>' +
        '<div class="w-228 dropdown-menu dropdown-menu-right drp-light-blue-bg p-0" aria-labelledby="dropdownMenuButton">' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3">View Details</button></div>' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3" data-toggle="modal" data-target="#share-model">Share</button></div>' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3">Download</button></div>' +
        '</div>' +
        '</td>' +
        '</tr>' +
        '<tr class="h-100">' +
        '<td class="pl-4 py-2">03/05/20</td>' +
        '<td class="py-2">1238102382</td>' +
        '<td class="py-2">Reference</td>' +
        '<td class="py-2">$24</td>' +
        '<td class="py-2">Source</td>' +
        '<td class="px-0 py-0 text-center align-middle dropdown da_017 da_025">' +
        '<button type="button" class="mx-3 btn dropdown-toggle" data-toggle="dropdown"></button>' +
        '<div class="w-228 dropdown-menu dropdown-menu-right drp-light-blue-bg p-0" aria-labelledby="dropdownMenuButton">' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3">View Details</button></div>' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3" data-toggle="modal" data-target="#share-model">Share</button></div>' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3">Download</button></div>' +
        '</div>' +
        '</td>' +
        '</tr>' +
        '<tr class="h-100">' +
        '<td class="pl-4 py-2">03/05/20</td>' +
        '<td class="py-2">1238102382</td>' +
        '<td class="py-2">Reference</td>' +
        '<td class="py-2">$24</td>' +
        '<td class="py-2">Source</td>' +
        '<td class="px-0 py-0 text-center align-middle dropdown da_017 da_025">' +
        '<button type="button" class="mx-3 btn dropdown-toggle" data-toggle="dropdown"></button>' +
        '<div class="w-228 dropdown-menu dropdown-menu-right drp-light-blue-bg p-0" aria-labelledby="dropdownMenuButton">' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3">View Details</button></div>' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3" data-toggle="modal" data-target="#share-model">Share</button></div>' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3">Download</button></div>' +
        '</div>' +
        '</td>' +
        '</tr>' +
        '<tr class="h-100">' +
        '<td class="pl-4 py-2">03/05/20</td>' +
        '<td class="py-2">1238102382</td>' +
        '<td class="py-2">Reference</td>' +
        '<td class="py-2">$24</td>' +
        '<td class="py-2">Source</td>' +
        '<td class="px-0 py-0 text-center align-middle dropdown da_017 da_025">' +
        '<button type="button" class="mx-3 btn dropdown-toggle" data-toggle="dropdown"></button>' +
        '<div class="w-228 dropdown-menu dropdown-menu-right drp-light-blue-bg p-0" aria-labelledby="dropdownMenuButton">' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3">View Details</button></div>' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3" data-toggle="modal" data-target="#share-model">Share</button></div>' +
        '<div><button class="btn-hover h6 font-weight-500 text-gray-500 bg-transparent border-0 w-100 text-left mb-0 pl-4 pr-4 pt-3 pb-3">Download</button></div>' +
        '</div>' +
        '</td>' +
        '</tr>' +
        '</tbody>' +
        '</table>';
}

$(document).ready(function() {
    var table = $('#broker-invoice-slim-table').DataTable({

        'columns': [{
                'data': 'id',
                'width': '5%'
            },
            {
                'data': 'Invoice',
                'width': '10%'
            },
            {
                'data': 'Date',
                'width': '10%'
            },
            {
                'data': 'Insured',
                'width': '10%'
            },
            {
                'data': 'Policy',
                'width': '10%'
            },
            {
                'data': 'Eff-date',
                'width': '10%'
            },
            {
                'data': 'Payments',
                'width': '10%'
            },
            {
                'data': 'Total-Paid',
                'width': '10%'
            },
            {
                'data': 'Expand-Row',
                'width': '10%'
            },
            {
                'data': 'Ellipsis',
                'width': '5%'
            },
            {
                'data': 'Policy-Status',
                'width': '5%'
            }
        ],
        "initComplete": function (settings, json) {  
            $("#broker-invoice-slim-table").wrap("<div style='overflow:auto; width:100%;position:relative;'></div>");            
          },
        'pagingType': 'simple',
        'responsive': true,
        'scrollX': false,
        'ordering': false,
        'autoWidth': true,
        'language': {
            paginate: {
                next: '<img src="img/right-black-chevron.svg">',
                previous: '<img src="img/left-black-chevron.svg">'
            }
        },
        "dom": '<"float-left"><"float-right">rt<"row"<"col-sm-5"l><"col-sm-3"l><"col-sm-3"i><"col-sm-1"p>>'
    });

    $("#broker-invoice-slim-table_length").addClass('mt-2').html('<span class="text-gray-500">Total Rows: <b>25</b></span>');

    $('#broker-invoice-slim-table tbody').on('click', '.details-control', function() {
        var tr = $(this).closest('tr');
        var row = table.row(tr);

        if (row.child.isShown()) {
            row.child.hide();
            tr.removeClass('shown');
            if ($('#broker-invoice-slim-table').data('view') == 'collapse_view') {
                tr.find(".expandview").addClass("d-none");
            }


        } else {
            row.child(format(row.data())).show();
            tr.addClass('shown');
            if ($('#broker-invoice-slim-table').data('view') == 'collapse_view') {
                tr.find(".expandview").removeClass("d-none");
            }

        }
    });


    $('#broker-invoice-slim-table-compact-view').on('click', function() {
        if ($('#broker-invoice-slim-table').data('view') == 'collapse_view') {
            $('#broker-invoice-slim-table').data('view', 'expand_view');
            $('.brokerpoliciesexpandview').removeClass("d-none");

            $("#broker-invoice-slim-table-compact-view img").attr("src", "img/view-two.svg");
            $('#broker-invoice-slim-table-compact-view').removeClass("da_026").addClass("da_027");
        } else {
            $('#broker-invoice-slim-table').data('view', 'collapse_view');
            $('.brokerpoliciesexpandview').addClass("d-none");
            $("#broker-invoice-slim-table-compact-view img").attr("src", "img/view-one-blue.svg");
            $('#broker-invoice-slim-table-compact-view').removeClass("da_026").addClass("da_027");
        }


    });




    $('#broker-invoice-slim-table-compact-view').mouseover(function() {
        if ($('#broker-invoice-slim-table').data('view') == 'collapse_view') {
            $('img', this).attr('src', function(i, oldSrc) {

                return 'img/view-one-blue.svg';
            });
            $("#broker-invoice-slim-table-compact-view").attr('title', 'Slim view');
        } else {
            $('img', this).attr('src', function(i, oldSrc) {

                return 'img/view-two.svg';
            });
            $("#broker-invoice-slim-table-compact-view").attr('title', 'Regular view');
        }
    });

    $('#broker-invoice-slim-table-compact-view').mouseout(function() {
        if ($('#broker-invoice-slim-table').data('view') == 'collapse_view') {
            $('img', this).attr('src', function(i, oldSrc) {

                return 'img/view-one.svg';
            });
            $("#broker-invoice-slim-table-compact-view").attr('title', 'Slim view');
        } else {
            $('img', this).attr('src', function(i, oldSrc) {

                return 'img/view-two-grey.svg';
            });
            $("#broker-invoice-slim-table-compact-view").attr('title', 'Regular view');
        }
    });


    // Handle click on "Collapse All" button
    $('.broker-invoice-compact-view').on('click', function() {
        // Enumerate all rows
        $('#broker-invoice-slim-table').DataTable().rows().every(function() {
            // If row has details expanded
            if (this.child.isShown()) {
                // Collapse row details
                this.child.hide();
                $(this.node()).removeClass('shown');
            }
        });

        $('#broker-invoice-regular-table').DataTable().rows().every(function() {
            // If row has details expanded
            if (this.child.isShown()) {
                // Collapse row details
                this.child.hide();
                $(this.node()).removeClass('shown');
            }
        });
    });


    $('#selectAllSlim').change(function() {
        $('.cb-element').prop('checked', this.checked);
    });

    $('.cb-element').change(function() {
        if ($('.cb-element:checked').length == $('.cb-element').length) {
            $('#selectAllSlim').prop('checked', true);
        } else {
            $('#selectAllSlim').prop('checked', false);
        }
    });
    $('#selectAllRegular').change(function() {
        $('.cb-element').prop('checked', this.checked);
    });

    $('.cb-element').change(function() {
        if ($('.cb-element:checked').length == $('.cb-element').length) {
            $('#selectAllRegular').prop('checked', true);
        } else {
            $('#selectAllRegular').prop('checked', false);
        }
    });
});


/*********************************regular view table*****************************/


$(document).ready(function() {
    var table = $('#broker-invoice-regular-table').DataTable({

        'columns': [{
                'data': 'id',
                'width': '5%'
            },
            {
                'data': 'line-1',
                'width': '20%'
            },
            {
                'data': 'line-2',
                'width': '20%'
            },
            {
                'data': 'line-3',
                'width': '20%'
            },
            {
                'data': 'line-4',
                'width': '20%'
            },
            {
                'data': 'Insureds',
                'width': '10%'
            },
            {
                'data': 'Policy-Status',
                'width': '5%'
            }
        ],
        'pagingType': 'simple',
        'responsive': true,
        'scrollX': true,
        'ordering': false,
        'language': {
            paginate: {
                next: '<img src="img/right-black-chevron.svg">',
                previous: '<img src="img/left-black-chevron.svg">'
            }
        },
        "dom": '<"float-left"><"float-right">rt<"row"<"col-sm-5"l><"col-sm-3"l><"col-sm-3"i><"col-sm-1"p>>'
    });

    $("#broker-invoice-regular-table_length").addClass('mt-2').html('<span class="text-gray-500">Total Rows: <b>25</b></span>');

    $('#broker-invoice-regular-table tbody').on('click', '.details-control', function() {
        var tr = $(this).closest('tr');
        var row = table.row(tr);

        if (row.child.isShown()) {
            row.child.hide();
            tr.removeClass('shown');
            if ($('#broker-invoice-regular-table').data('view') == 'collapse_view') {
                tr.find(".expandview").addClass("d-none");
            }


        } else {
            row.child(format(row.data())).show();
            tr.addClass('shown');
            if ($('#broker-invoice-regular-table').data('view') == 'collapse_view') {
                tr.find(".expandview").removeClass("d-none");
            }

        }
    });
});
/***************************************/
jQuery(function ($) {

    $("#br-in-slim-view").show();
    $("#br-in-regular-view").hide();


    $(".broker-invoice-compact-view").click(function() {
        $("#br-in-slim-view, #br-in-regular-view").toggle();
        if($('.maximize-hide-div:visible').length == 0)
        {   

            $('img', '.br-maximize-button').attr('src', function(i, oldSrc) {
                return 'img/minimize-white.svg';
            });
        }
        else{

            $('img', '.br-maximize-button').attr('src', function(i, oldSrc) {
                return 'img/maximize-grey.svg';
            });
        }
    });

});

$('.broker-invoice-compact-view').mouseover(function() {
    console.log($(this).find('img').attr('src'));
    if ($(this).find('img').attr('src') == 'img/view-one.svg') {

        $('img', this).attr('src', function(i, oldSrc) {

            return 'img/view-one-blue.svg';
        });
        $(".broker-invoice-compact-view").attr('title', 'Slim view');
    }
    else {
        $('img', this).attr('src', function(i, oldSrc) {

            return 'img/view-two.svg';
        });
        $(".broker-invoice-compact-view").attr('title', 'Regular view');
    }
});

$('.broker-invoice-compact-view').mouseout(function() {
    if ($(this).find('img').attr('src') == 'img/view-one-blue.svg') {
        $('img', this).attr('src', function(i, oldSrc) {

            return 'img/view-one.svg';
        });
        $(".broker-invoice-compact-view").attr('title', 'Slim view');
    }
    else{
        $('img', this).attr('src', function(i, oldSrc) {

            return 'img/view-two-grey.svg';
        });
        $(".broker-invoice-compact-view").attr('title', 'Regular view');
    }
});
/*********************************invoice slim view*****************************/
$(document).ready(function() {
    $('#invoice-slim-header-two').removeClass("d-sm-flex").hide();
    $(".cb-element, #selectAllSlim").on('change', function(e) {
        if ($('.cb-element:checked').length > 0) {
            $('#invoice-slim-header-one').removeClass("d-sm-flex").css("display", "none");
            $('#invoice-slim-header-two').addClass("d-sm-flex").css("display", "block");
        } else {
            $('#invoice-slim-header-one').addClass("d-sm-flex").css("display", "block");
            $('#invoice-slim-header-two').removeClass("d-sm-flex").css("display", "none");
        }
    });

    $('#br-check-div-two').removeClass("d-sm-flex").hide();
    $(".cb-element, #selectAllRegular").on('change', function(e) {
        if ($('.cb-element:checked').length > 0) {
            $('#br-check-div-one').removeClass("d-sm-flex").css("display", "none");
            $('#br-check-div-two').addClass("d-sm-flex").css("display", "block");
        } else {
            $('#br-check-div-one').addClass("d-sm-flex").css("display", "block");
            $('#br-check-div-two').removeClass("d-sm-flex").css("display", "none");
        }
    });
});

$(document).ready(function() {
    $('#br-search-user-button').mouseover(function() {
        if (!$('#br-search-user-button').hasClass("bg-primary")) {
            $('img', this).attr('src', function(i, oldSrc) {

                return 'img/blue-searchbar.svg';
            });
        }
    });

    $('#br-search-user-button').mouseout(function() {
        if (!$('#br-search-user-button').hasClass("bg-primary")) {
            $('img', this).attr('src', function(i, oldSrc) {

                return 'img/grey-searchbar.svg';
            });
        }
    });



    $('#br-search-user-list').hide();
    $('#br-search-user-button').on('click',
        function() {
            $('#br-search-user-list').hide();
            if ($('#br-search-user-button').hasClass("bg-transparent")) {
                $('#br-search-user-button').removeClass("bg-transparent").addClass("bg-primary");
                $('#br-search-user-list').addClass("pl-5").show();
                $('img', this).attr('src', function(i, oldSrc) {
                    return 'img/white-searchbar.svg';
                });
            } else {
                $('#br-search-user-button').removeClass("bg-primary").addClass("bg-transparent");
                $('#br-search-user-list').hide();
                $('img', this).attr('src', function(i, oldSrc) {
                    return 'img/grey-searchbar.svg';
                });
            }
        }
    );


    $('.br-maximize-button').mouseover(function() {
        if (!$('.br-maximize-button').hasClass("bg-primary")) {
            $('img', this).attr('src', function(i, oldSrc) {

                return 'img/maximize-blue.svg';
            });
        }
    });

    $('.br-maximize-button').mouseout(function() {
        if (!$('.br-maximize-button').hasClass("bg-primary")) {
            $('img', this).attr('src', function(i, oldSrc) {

                return 'img/maximize-grey.svg';
            });
        }
    });

    $('.br-maximize-button').click(function() {
        if ($('.maximize-hide-div:hidden').length == 0) {

            $(".maximize-hide-div").removeClass("d-flex").css("display", "none");
            $('.br-maximize-button').removeClass("bg-transparent").addClass("bg-primary");

            $('img', this).attr('src', function(i, oldSrc) {
                return 'img/minimize-white.svg';
            });

        } else {
            $(".maximize-hide-div").addClass("d-flex").css("display", "block");
            $('.br-maximize-button').removeClass("bg-primary").addClass("bg-transparent");

            $('img', this).attr('src', function(i, oldSrc) {
                return 'img/maximize-grey.svg';
            });

        }
    });
});